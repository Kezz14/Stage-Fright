<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stage Fright</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">
    <link rel="stylesheet" href="./style.css" />
</head>

<body>
    <!-- Navbar -->
    <div class="navbar">
        <div class="nav-logo">
            <a href="./index.html">
                <img src="logo1.png" alt="Stage Fright Logo" class="logo">
            </a>
        </div>
        <div class="nav-links">
            <a href="./index.html">Home</a>
            <a href="./Tour.html">Tour</a>
            <a href="./Merch.html">Merch</a>
            <a href="./About.html">About</a>
            <a href="./index.html#contact-container">Contact</a>
        </div>
        
        <div class="cart-icon" onclick="toggleCart()">
            <i class="fas fa-shopping-cart"></i>
            <span id="cartCount" class="cart-badge">0</span>
        </div>
    </div>
    <!-- Cart Sidebar -->
    <div class="cart-sidebar" id="cartSidebar" style="transform: translateX(100%);">
        <div class="cart-header">
            <h3>Shopping Cart</h3>
            <button onclick="toggleCart()">&times;</button>
        </div>
        <div class="cart-items" id="cartItems">
            <!-- Items will be dynamically added here -->
        </div>
        <div class="cart-total">
            <p>Total: $<span id="cartTotal">0</span></p>
            <a href="./checkout.html">
                <button>Checkout</button>
            </a>
        </div>
        
    </div>

    <!-- Merch Section -->
    <main class="merch-section">
        <div class="container">
            <h1 class="pg-name">Merchandise</h1>
            <div class="grid">
                <div class="item">
                    <img src="./assets/images/T-Shirt.png" alt="T-Shirt">
                    <h3>Stage Fright T-Shirt</h3>
                    <p>$25</p>
                    <button onclick="addToCart('Stage Fright T-Shirt', 25)">Add to Cart</button>
                </div>
                <div class="item">
                    <img src="./assets/images/Hoodie.png" alt="Hoodie">
                    <h3>Stage Fright Hoodie</h3>
                    <p>$40</p>
                    <button onclick="addToCart('Hoodie', 40)">Add to Cart</button>
                </div>
                <div class="item">
                    <img src="./assets/images/Poster.png" alt="Poster">
                    <h3>Stage Fright Poster</h3>
                    <p>$10</p>
                    <button onclick="addToCart('Poster', 10)">Add to Cart</button>
                </div>
                <div class="item">
                    <img src="./assets/images/Vinyl.png" alt="Vinyl">
                    <h3>Stage Fright Vinyl</h3>
                    <p>$30</p>
                    <button onclick="addToCart('Vinyl', 30)">Add to Cart</button>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 Stage Fright. All rights reserved.</p>
    </footer>

    <!-- Include the script for cart functionality -->
    <script>
        // Initialize cart from localStorage if available
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let cartCount = cart.length;

        // Update cart display when the page loads
        updateCartDisplay();

        // Toggle Cart Sidebar
        function toggleCart() {
            const cartSidebar = document.getElementById('cartSidebar');
            if (cartSidebar.style.transform === 'translateX(0%)') {
                cartSidebar.style.transform = 'translateX(100%)';
            } else {
                cartSidebar.style.transform = 'translateX(0%)';
            }
        }

        // Add item to cart
        function addToCart(itemName, price) {
            const numericPrice = parseFloat(price); // Convert the price string to a number
            cart.push({ itemName, price: numericPrice });
            cartCount = cart.length;
            localStorage.setItem('cart', JSON.stringify(cart)); // Save to localStorage
            updateCartDisplay();
            alert(`Added ${itemName} for $${numericPrice.toFixed(2)} to your cart!`);
        }


        // Remove item from cart
        function removeFromCart(index) {
            cart.splice(index, 1); // Remove the item at the given index
            cartCount = cart.length;
            localStorage.setItem('cart', JSON.stringify(cart)); // Update localStorage
            updateCartDisplay(); // Update display after removing item
        }

        // Update cart display (cart count and cart items)
        function updateCartDisplay() {
            const cartCountElement = document.getElementById('cartCount');
            const cartItemsElement = document.getElementById('cartItems');
            const cartTotalElement = document.getElementById('cartTotal');

            // Update cart count
            cartCountElement.innerText = cartCount;

            // Clear current cart items display
            cartItemsElement.innerHTML = '';

            let total = 0;

            // Add items to cart display
            cart.forEach((item, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.classList.add('cart-item');
                itemDiv.innerHTML = `${item.itemName} - $${item.price} 
                                    <button onclick="removeFromCart(${index})">Remove</button>`;
                cartItemsElement.appendChild(itemDiv);
                total += item.price; // Sum the prices of all items in the cart
            });

            // Update total
            cartTotalElement.innerText = total.toFixed(2); // Ensure total is formatted as a decimal
        }

    </script>
</body>

</html>